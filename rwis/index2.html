<!DOCTYPE html>
<!-- template-v2015  -->
<!--[if lte IE 7]><html class="no-js old-ie lte-ie7" lang="en" dir="ltr"><![endif]-->
<!--[if lte IE 8]><html class="no-js old-ie lte-ie8 lte-ie7" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" dir="ltr"><!--<![endif]-->
<head>
  <!-- Head Content  -->
<meta charset="utf-8">

<!--[if gt IE 8 ]--><meta http-equiv="X-UA-Compatible" content="IE=Edge" /><!--<![endif]-->
<title>Lower Colorado River Operations | Lower Colorado Region | Bureau of Reclamation</title>
<meta name="Description" content="Bureau of Reclamation, Lower Colorado Region." />
<meta name="Keywords" content="Department of the Interior, Bureau of Reclamation, Lower Colorado Region, Lower Colorado River, Colorado River, Hoover Dam, Phoenix, Yuma, Temecula, Area Offices" />
<meta name="author" content="Bureau of Reclamation, Lower Colorado Region Web Team" />
<meta name="publisher" content="Bureau of Reclamation, Lower Colorado Region" />
<meta name="created" content="20150101" />
<meta name="expires" content="Never" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="https://www.usbr.gov/img/favicon.ico">

<!-- Stylesheets for visualizations -->
<link rel="stylesheet" href="https://www.usbr.gov/css/main.min.css" />
<link rel="stylesheet" href="https://www.usbr.gov/js/waterops/dygraph.css" />  
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
   integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="
   crossorigin=""/>

 <!-- JS libraries for visualizations -->
<script src="https://www.usbr.gov/js/lib/jquery.js"></script>
<script src="https://www.usbr.gov/js/waterops/d3.v3.min.js"></script>
<script src="https://www.usbr.gov/js/waterops/dygraph.min.js"></script>
<script src="https://www.usbr.gov/js/waterops/liquidFillGauge.js"></script>
<script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
   integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
   crossorigin=""></script>
<style>
    #map{ width: 400px; height: 500px; }
</style>

<!-- Modernizr -->
<script src="https://www.usbr.gov/js/lib/modernizr.js"></script>
  
</head>
<body>
  <div class="MainContainer">
    <!-- Skip Links (only visible to screen readers) -->
<div id="SkipLinks" class="SkipLinks">
  <ul>
    <li><a href="#Nav">Skip to Primary Navigation</a></li>
    <li><a href="#Main">Skip to Main Content</a></li>
    <li><a href="#Footer">Skip to Footer</a></li>
  </ul>
</div><!-- #BeginLibraryItem "library/topnav.lbi" --><!-- Header -->
<div class="Header" id="top" role="banner">
  <div class="Header-wrap container">

    <!-- Logo -->
    <a class="Header-logo" href="https://www.usbr.gov" title="Reclamation Home"><img src="https://www.usbr.gov/img/logo-white.png" alt="U.S. Bureau of Reclamation: Managing Water in the West"></a> 

     <div class="Header-social">
      <span class="Header-social-label">Share</span>
      <ul>
        <li>
          <a class="critical-icon" title="Share on Facebook" target="_blank" href="http://www.facebook.com/sharer.php?u={url}">
            <span class="icon-facebook" aria-hidden="true"></span>
            <span class="fallback">Facebook</span>
          </a>
        </li>
        <li>
          <a class="critical-icon" title="Share on Twitter" target="_blank" href="https://twitter.com/share?url={url}&text={title}&via={via}&hashtags={hashtags}">
            <span class="icon-twitter" aria-hidden="true"></span>
            <span class="fallback">Twitter</span>
          </a>
        </li>
        <li>
          <a class="critical-icon" title="Share on Tumblr" target="_blank" href="http://www.tumblr.com/share/link?url={url}&name={title}&description={desc}">
            <span class="icon-tumblr" aria-hidden="true"></span>
            <span class="fallback">Tumblr</span>
          </a>
        </li>
        <li>
          <a class="critical-icon" title="Share on Pinterest" target="_blank" href="https://pinterest.com/pin/create/bookmarklet/?media={img}&url={url}&is_video={is_video}&description={title}">
            <span class="icon-pinterest" aria-hidden="true"></span>
            <span class="fallback">Pinterest</span>
          </a>
        </li>
      </ul>
    </div><!-- end Header-social -->

  </div><!-- end container -->
</div><!-- end Header -->

<!-- Nav Menu -->
<div class="Nav" id="Nav">
  <div class="Nav-wrap">
    <!-- Navigation -->
    <ol class="Nav-list resetList" role="navigation" aria-label="Primary Navigation">
      <li class="Nav-item">
        <a class="Nav-item-link" href="#">Water &amp; Power</a>
        <ol class="Nav-sublist resetList" aria-label="submenu">
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/projects/dams.jsp" class="Nav-sublist-link">Dams</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/projects/powerplants.jsp" class="Nav-sublist-link">Powerplants</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/projects/projects.jsp" class="Nav-sublist-link">Projects</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/agrihydro.html" class="Nav-sublist-link">Agrimet/Hydromet</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/water/" class="Nav-sublist-link">Water Operations</a></li>
         </ol>
      </li>
      <li class="Nav-item">
        <a class="Nav-item-link" href="#">Resources &amp; Research</a>
        <ol class="Nav-sublist resetList" aria-label="submenu">
           <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/programs/" class="Nav-sublist-link">Programs</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/tsc/" class="Nav-sublist-link">Technical Service Center</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/research/" class="Nav-sublist-link">Research &amp; Development</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/recman/" class="Nav-sublist-link">Reclamation Manual</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/environmental/" class="Nav-sublist-link">Environmental Resources/Reports</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/library/" class="Nav-sublist-link">Library</a></li>
        </ol>
      </li>
      <li class="Nav-item">
        <a class="Nav-item-link" href="#">About Us</a>
        <ol class="Nav-sublist resetList" aria-label="submenu">
          <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/about/mission.html" class="Nav-sublist-link">Mission/Vision</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/about/fact.html" class="Nav-sublist-link">Fact Sheet</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/presskit/bios/biosdetail.cfm?recordid=1" class="Nav-sublist-link">Commissioner</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/offices.html" class="Nav-sublist-link">Addresses/Contacts</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/images/br_org_chart.pdf" class="Nav-sublist-link">Organizational Chart</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/presskit/bios/bios.cfm" class="Nav-sublist-link">Leadership Bios</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/hr/" class="Nav-sublist-link">Employment</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/comments.cfm/" class="Nav-sublist-link">Contact</a></li>
        </ol>
      </li>
      <li class="Nav-item">
        <a class="Nav-item-link" href="#">Recreation &amp; Public Use</a>
        <ol class="Nav-sublist resetList" aria-label="submenu">
          <li class="Nav-sublist-item"><a href="https://www.usbr.gov/recreation/" class="Nav-sublist-link">Find Recreation</a></li>
         <li class="Nav-sublist-item"><a href="http://www.recreation.gov/" class="Nav-sublist-link">Recreation.gov</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/lands/" class="Nav-sublist-link">Public Use</a></li>
        </ol>
      </li>
      <li class="Nav-item">
        <a class="Nav-item-link" href="#">News &amp; Multimedia</a>
        <ol class="Nav-sublist resetList" aria-label="submenu">
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/newsrelease/" class="Nav-sublist-link">News Releases</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/stories/" class="Nav-sublist-link">News Stories</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/speech/" class="Nav-sublist-link">Speeches</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/testimony/" class="Nav-sublist-link">Congressional Testimony</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/newsroom/presskit/factsheet/" class="Nav-sublist-link">Fact Sheets</a></li>
                  <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/multimedia/index.html#photos" class="Nav-sublist-link">Photos</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/multimedia/index.html#video" class="Nav-sublist-link">Multimedia</a></li>
         <li class="Nav-sublist-item"><a href="https://www.usbr.gov/main/multimedia/index.html#social" class="Nav-sublist-link">Social Media</a></li>
        </ol>
      </li>
    </ol>

    <!-- Search -->
    <div class="Header-search" id="recSearch">
       <form method="get" action=" http://search.usa.gov/search" role="search">
        <input type="hidden" name="affiliate" value="Reclamation" />
        <label class="visuallyhidden" for="query">Search</label>
        <input type="text" name="query" id="query" placeholder="Search" />
        <button type="submit" id="search">Search</button>
      </form>
    </div>
  </div>
</div><!-- #EndLibraryItem --><!-- Update inline style to change banner image -->
<div class="Main" id="Main" role="main" style="background-image: url('https://www.usbr.gov/img/bg-banner.jpg')">
      <!-- Additional wrapper for bottom background image -->
      <div class="Main-wrap" style="background-image: url('https://www.usbr.gov/img/bg-footer.jpg')">
        <!-- Banner -->
        <div class="Banner Banner--full">
          <div class="Banner-content">
            <div class="container">
              <h1>RWIS Data Service Test</h1>
           
            </div>
          </div>
        </div><!-- end Banner -->

        <div class="Main-content container">
          <!-- Breadcrumbs -->
<div class="Breadcrumbs">
  <div class="container">
    <ul class="resetList">
    <li><a href="https://www.usbr.gov">Reclamation Home</a></li>      
    </ul>
  </div>
</div>

<div class="Main-well">
            <div align="left">
              <table border="0" cellpadding="2" cellspacing="10" width="100%">
                <tbody>
                  <tr bgcolor="ffffff" align="left">
<br>				  

<!-- MAIN CONTENT GOES HERE -->

<h1>RWIS Usage Samples</h1>
<br><br>
This page is generated with data from <a href="https://water.usbr.gov/api/web/app.php/api/series?sites=hdmlc&parameters=Day.Inst.ReservoirElevation.feet&start=2017-01-01&end=2017-04-28">this</a> RWIS link to JSON data. 
Try reloading the page if the visualizations below do not show up after a few seconds.
<br><br>
	
	<tr bgcolor="ffffff" align="left">
	
		<td width="50%" valign="top">
		<strong>Main JS Function to get RWIS data: </strong>
		<br><br>
<pre>
var getJSON = function(url) 
{
&#9;return new Promise(function(resolve, reject) 
&#9;{
&#9;&#9;var xhr = new XMLHttpRequest();
&#9;&#9;xhr.open('get', url, true);
&#9;&#9;xhr.responseType = 'json';
&#9;&#9;xhr.onload = function() 
&#9;&#9;{
&#9;&#9;&#9;var status = xhr.status;
&#9;&#9;&#9;if (status == 200) 
&#9;&#9;&#9;{ resolve(xhr.response); } 
&#9;&#9;&#9;else 
&#9;&#9;&#9;{ reject(status); }
&#9;&#9;};
&#9;&#9;xhr.send();
&#9;});
};
</pre>
		</td>
		
		<td width="50%" valign="top">
		<strong>Usage: </strong>
		<br><br>
		In all the code examples below X is set to <a href="https://water.usbr.gov/api/web/app.php/api/series?sites=and&parameters=Day.Inst.ReservoirElevation.feet&start=2017-01-01&end=2017-04-28">this</a> link for RWIS data. <br>
		Y varies based on each visualization below.
<pre>
getJSON('X').then(function(data) 
{	
&#9;Y
});

With: 
X = Your URL to RWIS data
Y = Varying code shown below
</pre>
		</td>
		
	</tr>
	
	<tr bgcolor="ffffff" align="left">
	
		<td width="50%" valign="top">
		<strong><a href="http://dygraphs.com/">Dygraph</a> Data Plot:</strong>
		<br><br><br><br>
		<div id="graphdiv1"></div>
		<br><br>
		</td>
		
		<td width="50%" valign="top">
		<strong>Code & Dependencies</strong>
<pre>

rel="stylesheet" href="https://www.usbr.gov/js/waterops/dygraph.css"
src="https://www.usbr.gov/js/waterops/dygraph.min.js"

getJSON('X').then(function(data) 
{	
&#9;// Transform JSON string to DyGraph input...
&#9;graphData = graphData.replaceAll(/,\r?\n|\r/g, ", ");
&#9;graphData = graphData.replaceAll(/[\}],\s+[\{]\r?\n/g, "");
&#9;graphData = graphData.replaceAll(/[\{]\r?\n|\r/g, "");
&#9;graphData = graphData.replaceAll(/[\}]\r?\n|\r/g, "");
&#9;graphData = graphData.replaceAll(/,\s+0/g, ", 0],");
&#9;graphData = graphData.replaceAll("\"datetime\": ", "  [ ");
&#9;graphData = graphData.replaceAll("\"value\": ", " ");
&#9;graphData = graphData.replaceAll(/\s+00:00:00[\"],\s+[\"]/g, "\", ");
&#9;graphData = graphData.replaceAll(/[\"],\s+[\"]/g, "\"), ");
&#9;graphData = graphData.replaceAll("-","/");
&#9;graphData = graphData.replaceAll("\"), flag\": \"\""," ],");
&#9;graphData = graphData.replaceAll(/[\]],\r\n[\]]/g, "");
&#9;graphData = graphData.slice(0, graphData.length - 5) + 
&#9;graphData.slice(graphData.length - 4);
&#9;new Dygraph(document.getElementById("graphdiv1"),
&#9;&#9;graphData, 
&#9;&#9;{ 	
&#9;&#9;&#9;labels: [ "Date", "Value", "B" ],
&#9;&#9;&#9;ylabel: 'Value',
&#9;&#9;&#9;fillGraph: true,
&#9;&#9;&#9;color: '#244A9F',
&#9;&#9;&#9;highlightCircleSize: 5, 
&#9;&#9;&#9;pointSize: 1.5, 
&#9;&#9;&#9;strokeWidth: 1.5
&#9;&#9;}
&#9;);
});

</pre>		
		</td>	
		
	</tr>
	
	<tr bgcolor="ffffff" align="left">
	
		<td width="50%" valign="top">
		<strong><a href="http://bl.ocks.org/brattonc/5e5ce9beee483220e2f6">D3 Fill Gauge</a>: (based on data but % shown is non-sensical)</strong>
		<br><br>
		<svg id="fillgauge1" width="97%" height="250"></svg>
		<br><br>
		</td>
		
		<td width="50%" valign="top">
		<strong>Code & Dependencies</strong>
<pre>

src="https://www.usbr.gov/js/waterops/d3.v3.min.js"
src="https://www.usbr.gov/js/waterops/liquidFillGauge.js"

getJSON('X').then(function(data) 
{	
&#9;var fillVal = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters[
&#9;&#9;"Day.Inst.ReservoirElevation.feet"]["timeinterval"]
&#9;&#9;["Daily"][0].value, null, 4).replaceAll("\"","");
&#9;var config1 = liquidFillGaugeDefaultSettings();
&#9;config1.circleColor = "#244A9F";
&#9;config1.textColor = "#CB9F5B";
&#9;config1.waveTextColor = "#CB9F5B";
&#9;config1.waveColor = "#244A9F";
&#9;config1.circleThickness = 0.2;
&#9;config1.textVertPosition = 0.2;
&#9;config1.waveAnimateTime = 1000;
&#9;var gauge1 = loadLiquidFillGauge("fillgauge1", 
&#9;&#9;Math.floor(fillVal/15), config1);
});
</pre>		
		</td>	
		
	</tr>
	
	<tr bgcolor="ffffff" align="left">
	
		<td width="50%" valign="top">
		<strong>Displaying JSON Content:</strong>
		<blockquote>
		Name: <blockquote><div id="jsonName"></div>
		</blockquote></blockquote>
		<blockquote>
		Type: <blockquote><div id="jsonType"></div>
		</blockquote></blockquote>
		<blockquote>
		Data: <blockquote><div id="jsonData"></div>
		</blockquote></blockquote>
		</td>
		
		<td width="50%" valign="top">
		<strong>Code & Dependencies</strong>
<pre>

src="https://www.usbr.gov/js/lib/jquery.js"

getJSON('X').then(function(data) 
{	
&#9;jsonName.innerText = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].description, 
&#9;&#9;null, 4);
&#9;jsonType.innerText = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].type, 
&#9;&#9;null, 4);
&#9;jsonData.innerText = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters[
&#9;&#9;"Day.Inst.ReservoirElevation.feet"]["timeinterval"]
&#9;&#9;["Daily"][0], null, 4) + "," + JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].
&#9;&#9;parameters[Day.Inst.ReservoirElevation.feet"]["timeinterval"]
&#9;&#9;["Daily"][1], null, 4) + ", ..., " + JSON.stringify(data[
&#9;&#9;"Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]
&#9;&#9;["timeinterval"]["Daily"][data["Anderson Ranch Dam and Reservoir; ID"].parameters[
&#9;&#9;"Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"]
&#9;&#9;.length - 1], null, 4);
});
</pre>		
		</td>	
	
	</tr>
	
	<tr bgcolor="ffffff" align="left">
	
		<td width="50%" valign="top">
		<strong><a href="http://leafletjs.com/">Leaflet</a> Mapping:</strong>
		<br><br>
		<div id="mapLatLon"></div>
		<div id="map"></div>
		</td>
		
		<td width="50%" valign="top">
		<strong>Code & Dependencies</strong>
<pre>

script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"

getJSON('X').then(function(data) 
{	
&#9;var dataLat = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].latitude, null, 4)
&#9;&#9;.replaceAll("\"","");
&#9;var dataLon = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].longitude, null, 4)
&#9;&#9;.replaceAll("\"","");
&#9;mapLatLon.innerText = "JSON coordinates: " + dataLat + ", " + dataLon;
&#9;var map = L.map('map').setView([dataLat, dataLon], 13);	
&#9;L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
&#9;{
&#9;&#9;maxZoom: 19,
&#9;&#9;minZoom: 9
&#9;}).addTo(map);
&#9;var marker = L.marker([dataLat, dataLon]).addTo(map);
&#9;marker.bindPopup(dataLat + ", " + dataLon).openPopup();	
});
</pre>
	
		</td>	
		
	</tr>
	
	<tr bgcolor="ffffff" align="left">
	
		<td width="50%" valign="top">
		<strong>Excel Macro</strong>
		<br><br>
		</td>
		
		<td width="50%" valign="top">
		<strong>Excel VBA Code</strong>
<pre>
Sub RWIS_Query()
&#9;
&#9;' Build RWIS URL
&#9;' Template: https://water.usbr.gov/api/web/app.php/api/series?
&#9;'&#9;sites=hdmlc&parameters=Day.Inst.ReservoirElevation.feet&
&#9;'&#9;start=2017-01-01&end=2017-08-03&format=csv
&#9;tStart = "2017-01-01"
&#9;tEnd = "2017-07-01"
&#9;rwisUrl = "URL;https://water.usbr.gov/api/web/app.php/api/series?" & _
&#9;&#9;"sites=hdmlc&parameters=Day.Inst.ReservoirElevation.feet" & _
&#9;&#9;"&start=" & tStart & "&end=" & tEnd & "&format=csv"
&#9;
&#9;' Place data in sheet
&#9;Sheets("Sheet1").UsedRange.ClearContents
&#9;With ActiveSheet.QueryTables.Add(Connection:=rwisUrl, Destination:=Range("A1"))
&#9;&#9;.BackgroundQuery = True
&#9;&#9;.TablesOnlyFromHTML = True
&#9;&#9;.Refresh BackgroundQuery = True
&#9;&#9;.SaveData = True
&#9;End With
&#9;
&#9;' Split values using a comma delimiter
&#9;Columns("A:A").Select
&#9;Selection.TextToColumns Destination:=Range("A1"), DataType:=xlDelimited, _
&#9;&#9;TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
&#9;&#9;Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
&#9;&#9;:=Array(Array(1, 1), Array(2, 1), Array(3, 1), Array(4, 1), Array(5, 1), Array(6, 1), _
&#9;&#9;Array(7, 1), Array(8, 1), Array(9, 1), Array(10, 1), Array(11, 1), Array(12, 1), Array(13, 1 _
&#9;&#9;), Array(14, 1), Array(15, 1), Array(16, 1), Array(17, 1)), TrailingMinusNumbers:= _
&#9;&#9;True
End Sub
</pre>
	
		</td>	
		
	</tr>



	
                </tr>
                </tbody>
              </table>
            </div>
		</div><!-- end Main-well -->
	</div><!-- end Main-content -->    
</div><!-- end Main-wrap -->
</div><!-- end Main -->

<div><!-- #BeginLibraryItem "/library/footer.lbi" -->
<!-- Footer -->
<div class="Footer" id="Footer" role="contentinfo">
  <div class="container">

    <h2 class="visuallyhidden">More Information about the U.S. Bureau of Reclamation</h2>

    <!-- Social Links -->
    <div class="Footer-social">
      <h2>Stay in Touch</h2>
      <ul>
        <li>
          <a href="http://www.facebook.com/bureau.of.reclamation" target="new" class="critical-icon">
            <span class="icon-facebook" aria-hidden="true"></span>
            <span class="fallback">Facebook</span>
          </a>
        </li>
        <li>
          <a href="http://twitter.com/usbr" class="critical-icon" target="new">
            <span class="icon-twitter" aria-hidden="true"></span>
            <span class="fallback">Twitter</span>
          </a>
        </li>
        <li>
          <a href="http://www.youtube.com/user/reclamation" class="critical-icon" target="new">
            <span class="icon-youtube" aria-hidden="true"></span>
            <span class="fallback">YouTube</span>
          </a>
        </li>
        <li>
          <a href="http://www.flickr.com/photos/usbr/" class="critical-icon" target="new">
            <span class="icon-flickr" aria-hidden="true"></span>
            <span class="fallback">Flickr</span>
          </a>
        </li>
        <li>
          <a href="http://usbr.tumblr.com/" class="critical-icon" target="new">
            <span class="icon-tumblr" aria-hidden="true"></span>
            <span class="fallback">Tumblr</span>
          </a>
        </li>
        <li>
          <a href="http://www.pinterest.com/usbrgov/" class="critical-icon" target="new">
            <span class="icon-pinterest" aria-hidden="true"></span>
            <span class="fallback">Pinterest</span>
          </a>
        </li>
        <li>
          <a href="http://instagram.com/bureau_of_reclamation" class="critical-icon" target="new">
            <span class="icon-instagram" aria-hidden="true"></span>
            <span class="fallback">Instagram</span>
          </a>
        </li>
        <li>
          <a href="https://www.usbr.gov/newsroom/rssxml/rssfeeds.html" class="critical-icon" target="new">
            <span class="icon-rss" aria-hidden="true"></span>
            <span class="fallback">RSS</span>
          </a>
        </li>
      </ul>
    </div>

    <!-- Site Links -->
    <div class="Footer-links">
      <ul>
        <li><a href="https://www.usbr.gov/main/comments.cfm">Contact Us</a></li>
        <li><a href="https://www.usbr.gov/main/index/">Site Index</a></li>
      </ul>
      <ul>
        <li><a href="https://www.usbr.gov/main/access.html">Accessibility</a></li>
        <li><a href="https://www.usbr.gov/main/disclaimer.html">Disclaimer</a></li>
        <li><a href="http://www.doi.gov/" target="new"><abbr title="Department of the Interior">DOI</abbr></a></li>
       
        <li><a href="https://www.usbr.gov/foia/">FOIA</a></li>
        <li><a href="http://www.doi.gov/pmb/eeo/no-fear-act.cfm">No Fear Act</a></li>
        <li><a href="https://www.usbr.gov/main/notices.html">Notices</a></li>
         <li><a href="https://www.usbr.gov/main/privacy.html">Privacy Policy</a></li>
        <li><a href="https://www.usbr.gov/main/qoi/">Quality of Information</a></li>
        <li><a href="http://www.recreation.gov/" target="new">Recreation.gov</a></li>
        <li><a href="http://www.usa.gov/" target="new">USA.gov</a></li>
       
      </ul>
    </div>
    

    <!-- Logo -->
    <a class="Footer-logo" href="https://www.usbr.gov"><img src="https://www.usbr.gov/img/seal-white.png" alt="U.S. Department of the Interior-Bureau of Reclamation"></a>

  </div>
</div>

 <!-- #EndLibraryItem --></div> 

<!-- JS for generating visualizations -->
<script>
// Only load FastClick if touch events are supported
if ( Modernizr.touch ) {
  $(function() {
    $.getScript("https://www.usbr.gov/js/lib/fastclick.min.js", function() {
      FastClick.attach(document.body);
    });
  });
}
// Function to fetch RWIS JSON output
var getJSON = function(url) {
  return new Promise(function(resolve, reject) {
    var xhr = new XMLHttpRequest();
    xhr.open('get', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status == 200) {
        resolve(xhr.response);
      } else {
        reject(status);
      }
    };
    xhr.send();
  });
};
// Replace-All function for working with strings
String.prototype.replaceAll = function(search, replace) {
    if (replace === undefined) {
        return this.toString();
    }
    return this.split(search).join(replace);
}
// Main script that does all the work
getJSON('https://water.usbr.gov/api/web/app.php/api/series?sites=and&parameters=Day.Inst.ReservoirElevation.feet&start=2016-01-01&end=2017-07-01').then(function(data) {	
	// ACCESSING JSON OUTPUTS WITH JS
	jsonName.innerText = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].description, null, 4);
	jsonType.innerText = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].type, null, 4);
	jsonData.innerText = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"][0], null, 4) + "," + 
						JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"][1], null, 4) + ", ..., " + 
						JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"][
							data["Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"].length - 1
						], null, 4);
	
	// TIMESERIES CHART USING DYGRAPHS
	var graphData = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"], null, 2);
    // Transform JSON string to DyGraph input...
	graphData = graphData.replaceAll(/,\r?\n|\r/g, ", ");
	graphData = graphData.replaceAll(/[\}],\s+[\{]\r?\n/g, "");
	graphData = graphData.replaceAll(/[\{]\r?\n|\r/g, "");
	graphData = graphData.replaceAll(/[\}]\r?\n|\r/g, "");
	graphData = graphData.replaceAll(/,\s+0/g, ", 0],");
	graphData = graphData.replaceAll("\"datetime\": ", "  [ ");
	graphData = graphData.replaceAll("\"value\": ", " ");
	graphData = graphData.replaceAll(/\s+00:00:00[\"],\s+[\"]/g, "\", ");
	graphData = graphData.replaceAll(/[\"],\s+[\"]/g, "\"), ");
	graphData = graphData.replaceAll("-","/");
	graphData = graphData.replaceAll("\"), flag\": \"\""," ],");
	graphData = graphData.replaceAll(/[\]],\r\n[\]]/g, "");
	graphData = graphData.slice(0, graphData.length - 5) + graphData.slice(graphData.length - 4);
	new Dygraph(document.getElementById("graphdiv1"),
				graphData, 
				{ 	
					labels: [ "Date", "Value", "B" ],
					ylabel: 'Value',
					fillGraph: true,
					color: '#244A9F',
					highlightCircleSize: 5, 
					pointSize: 1.5, 
					strokeWidth: 1.5

				}
			 );
	
	// FILL GAUGE USING D3
	var fillVal = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].parameters["Day.Inst.ReservoirElevation.feet"]["timeinterval"]["Daily"][0].value, null, 4).replaceAll("\"","");
	var config1 = liquidFillGaugeDefaultSettings();
    config1.circleColor = "#244A9F";
    config1.textColor = "#CB9F5B";
    config1.waveTextColor = "#CB9F5B";
    config1.waveColor = "#244A9F";
    config1.circleThickness = 0.2;
    config1.textVertPosition = 0.2;
    config1.waveAnimateTime = 1000;
    var gauge1 = loadLiquidFillGauge("fillgauge1", Math.floor(fillVal/150), config1);
	
	// MAPPING EXAMPLE USING LEAFLET
	var dataLat = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].latitude, null, 4).replaceAll("\"","");
	var dataLon = JSON.stringify(data["Anderson Ranch Dam and Reservoir; ID"].longitude, null, 4).replaceAll("\"","");
	mapLatLon.innerText = "JSON coordinates: " + dataLat + ", " + dataLon;
	// initialize the map
	var map = L.map('map').setView([dataLat, dataLon], 13);	
	// load a tile layer
	L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
	{
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
		maxZoom: 19,
		minZoom: 9
	}).addTo(map);
	var marker = L.marker([dataLat, dataLon]).addTo(map);
	marker.bindPopup(dataLat + ", " + dataLon).openPopup();
}, function(status) { //error detection....
  alert('Something went wrong.');
});  
</script>
   
<!-- Outlines -->
<script src="https://www.usbr.gov/js/components/outlines.js"></script>

<!-- Mobile Navigation -->
<script src="https://www.usbr.gov/js/components/navigation.js"></script>

<!-- Responsive Tabs -->
<script src="https://www.usbr.gov/js/lib/responsive-tabs.js"></script>
<script src="https://www.usbr.gov/js/components/tabs.js"></script>

<!-- Explore Accordion -->
<script src="https://www.usbr.gov/js/components/explore.js"></script>

<!-- Carousel -->
<script src="https://www.usbr.gov/js/lib/carousel.js"></script>
<script src="https://www.usbr.gov/js/components/carousel.js"></script>

<!-- Left Navigation -->
<script src="https://www.usbr.gov/js/components/left-nav.js"></script>

</body>
</html>